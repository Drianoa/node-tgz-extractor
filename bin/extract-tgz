#!/usr/bin/env node

require('colors');

const program = require('commander');
const packageJson = require('../package.json');

const start = Date.now();
process.on('unhandledRejection', error => {
    console.log(`[${'unhandledRejection'.red}]: ${error.message}`, error);
})
process.on('beforeExit', () => {
    console.log(`completed in ${Date.now() - start}ms`.green);
});

const commands = require('../lib/commands');

program.version(packageJson.version);

program
    .command('package-lock <uri>')
    .description('extract tarballs from npm cache based on a package-lock.json')
    .option('--directory [directory]')
    .option('--registry [registry]')
    .action((uri, command) => commands.packageLockCommandExtract(uri, command));


program.parse(process.argv);
